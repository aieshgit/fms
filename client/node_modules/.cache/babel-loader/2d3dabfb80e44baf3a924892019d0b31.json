{"ast":null,"code":"import _defineProperty from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Axios from\"axios\";import{useHistory,useParams}from\"react-router-dom\";//import BottomBar from \"../layouts/BottomBar\";\nimport UserAuth from\"../auth/UserAuth\";import ErrorModal from\"../layouts/ErrorModal\";import Dropdown from\"../layouts/Dropdown\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditFuel=function EditFuel(){var history=useHistory();var _useParams=useParams(),id=_useParams.id;var _useState=useState({vehicleNum:\"\",vehicleDbId:\"\",fuelDate:\"\",fuelQty:\"\",totalFuelCost:\"\",mileage:\"\",fuelDbId:\"\"}),_useState2=_slicedToArray(_useState,2),fuel=_useState2[0],setFuel=_useState2[1];useEffect(function(){loadFuel();},[]);var loadFuel=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.get(\"\".concat(process.env.REACT_APP_BACKEND_SERVER,\"/fuel/\").concat(id));case 2:result=_context.sent;//  console.log(result.data);\nsetFuel(result.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function loadFuel(){return _ref.apply(this,arguments);};}();// dropdown current value\n// Error modal\nvar _useState3=useState({showModal:false,error:\"\"}),_useState4=_slicedToArray(_useState3,2),modal=_useState4[0],setModal=_useState4[1];var handleCloseModal=function handleCloseModal(){setModal({showModal:false,error:\"\"});};var onInputChange=function onInputChange(event){//  console.log(event.target.value);\nif(event.target.name===\"vehicleNum\"){var _objectSpread2;setFuel(_objectSpread(_objectSpread({},fuel),{},(_objectSpread2={},_defineProperty(_objectSpread2,event.target.name,event.target.value),_defineProperty(_objectSpread2,\"vehicleDbId\",event.target.selectedOptions[0].getAttribute(\"dbid\")),_objectSpread2)));}else{setFuel(_objectSpread(_objectSpread({},fuel),{},_defineProperty({},event.target.name,event.target.value)));}};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var _yield$Axios$put,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();_context2.prev=1;_context2.next=4;return Axios.put(\"\".concat(process.env.REACT_APP_BACKEND_SERVER,\"/fuel/\").concat(id),fuel);case 4:_yield$Axios$put=_context2.sent;data=_yield$Axios$put.data;// if data invalid show error pop up\nif(data.isDataValid===false){setModal({showModal:true,error:data.error});}// else push to list view\nelse{history.push(\"/fuel\");}_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);console.error(_context2.t0.message);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[1,9]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();// uncomment if using bottom bar\n/*   const handleCancel = () => {\r\n    setFuel(\"\");\r\n    history.push(\"/fuel-list\");\r\n  }; */return/*#__PURE__*/_jsx(UserAuth,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container p-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center m-4\",children:\"Edit Fuel\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row my-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3 p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"vehicleNum\",className:\"form-label mb-0\",children:\"Vehicle#\"}),/*#__PURE__*/_jsx(\"select\",{type:\"text\",className:\"form-select mt-0\",name:\"vehicleNum\",value:fuel.vehicleNum,onChange:onInputChange,required:true,children:/*#__PURE__*/_jsx(Dropdown,{dropDownObject:\"vehicles\",dropDownKey1:\"vehicleNum\",dropDownKey2:\"regNum\"//   currentValue={fuel.vehicleNum + \"[\" + fuel.regNum + \"]\"}\n,currentValue:fuel.vehicleNum})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3 p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fuelDate\",className:\"form-label mb-0\",children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control mt-0\",name:\"fuelDate\",value:fuel.fuelDate,onChange:onInputChange})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3 p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fuelQty\",className:\"form-label mb-0\",children:\"Quantity (ltr.)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control mt-0\",name:\"fuelQty\",value:fuel.fuelQty,onChange:onInputChange})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3 p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"totalFuelCost\",className:\"form-label mb-0\",children:\"Total Cost ($)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control mt-0\",name:\"totalFuelCost\",value:fuel.totalFuelCost,onChange:onInputChange})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center pt-5\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary w-35 py-2 px-5\",children:\"Save\"})})]}),/*#__PURE__*/_jsx(ErrorModal,{show:modal.showModal,error:modal.error,handleCloseModal:handleCloseModal})]})});};export default EditFuel;","map":{"version":3,"sources":["C:/Users/akau1902/Web Development/fleet-management-system/client/src/components/detail_comps/EditFuel.js"],"names":["React","useState","useEffect","Axios","useHistory","useParams","UserAuth","ErrorModal","Dropdown","EditFuel","history","id","vehicleNum","vehicleDbId","fuelDate","fuelQty","totalFuelCost","mileage","fuelDbId","fuel","setFuel","loadFuel","get","process","env","REACT_APP_BACKEND_SERVER","result","data","showModal","error","modal","setModal","handleCloseModal","onInputChange","event","target","name","value","selectedOptions","getAttribute","handleSubmit","preventDefault","put","isDataValid","push","console","message"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Axios from \"axios\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n//import BottomBar from \"../layouts/BottomBar\";\r\nimport UserAuth from \"../auth/UserAuth\";\r\nimport ErrorModal from \"../layouts/ErrorModal\";\r\nimport Dropdown from \"../layouts/Dropdown\";\r\n\r\nconst EditFuel = () => {\r\n  let history = useHistory();\r\n  const { id } = useParams();\r\n  const [fuel, setFuel] = useState({\r\n    vehicleNum: \"\",\r\n    vehicleDbId: \"\",\r\n    fuelDate: \"\",\r\n    fuelQty: \"\",\r\n    totalFuelCost: \"\",\r\n    mileage: \"\",\r\n    fuelDbId: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadFuel();\r\n  }, []);\r\n\r\n  const loadFuel = async () => {\r\n    const result = await Axios.get(\r\n      `${process.env.REACT_APP_BACKEND_SERVER}/fuel/${id}`\r\n    );\r\n    //  console.log(result.data);\r\n    setFuel(result.data);\r\n  };\r\n\r\n  // dropdown current value\r\n\r\n  // Error modal\r\n  const [modal, setModal] = useState({ showModal: false, error: \"\" });\r\n\r\n  const handleCloseModal = () => {\r\n    setModal({ showModal: false, error: \"\" });\r\n  };\r\n\r\n  const onInputChange = (event) => {\r\n    //  console.log(event.target.value);\r\n    if (event.target.name === \"vehicleNum\") {\r\n      setFuel({\r\n        ...fuel,\r\n        [event.target.name]: event.target.value,\r\n        vehicleDbId: event.target.selectedOptions[0].getAttribute(\"dbid\"),\r\n      });\r\n    } else {\r\n      setFuel({ ...fuel, [event.target.name]: event.target.value });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      //  console.log(vehicle);\r\n      const { data } = await Axios.put(\r\n        `${process.env.REACT_APP_BACKEND_SERVER}/fuel/${id}`,\r\n        fuel\r\n      );\r\n\r\n      // if data invalid show error pop up\r\n      if (data.isDataValid === false) {\r\n        setModal({ showModal: true, error: data.error });\r\n      }\r\n      // else push to list view\r\n      else {\r\n        history.push(\"/fuel\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  // uncomment if using bottom bar\r\n  /*   const handleCancel = () => {\r\n    setFuel(\"\");\r\n    history.push(\"/fuel-list\");\r\n  }; */\r\n\r\n  return (\r\n    <UserAuth>\r\n      <div className=\"container p-5\">\r\n        <h2 className=\"text-center m-4\">Edit Fuel</h2>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"row my-5\">\r\n            <div className=\"col-lg-3 p-3\">\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"vehicleNum\" className=\"form-label mb-0\">\r\n                  Vehicle#\r\n                </label>\r\n                <select\r\n                  type=\"text\"\r\n                  className=\"form-select mt-0\"\r\n                  name=\"vehicleNum\"\r\n                  value={fuel.vehicleNum}\r\n                  onChange={onInputChange}\r\n                  required\r\n                >\r\n                  <Dropdown\r\n                    dropDownObject=\"vehicles\"\r\n                    dropDownKey1=\"vehicleNum\"\r\n                    dropDownKey2=\"regNum\"\r\n                    //   currentValue={fuel.vehicleNum + \"[\" + fuel.regNum + \"]\"}\r\n                    currentValue={fuel.vehicleNum}\r\n                  />\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-lg-3 p-3\">\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"fuelDate\" className=\"form-label mb-0\">\r\n                  Date\r\n                </label>\r\n                <input\r\n                  type=\"date\"\r\n                  className=\"form-control mt-0\"\r\n                  name=\"fuelDate\"\r\n                  value={fuel.fuelDate}\r\n                  onChange={onInputChange}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-lg-3 p-3\">\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"fuelQty\" className=\"form-label mb-0\">\r\n                  Quantity (ltr.)\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control mt-0\"\r\n                  name=\"fuelQty\"\r\n                  value={fuel.fuelQty}\r\n                  onChange={onInputChange}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-lg-3 p-3\">\r\n              <div className=\"mb-3\">\r\n                <label htmlFor=\"totalFuelCost\" className=\"form-label mb-0\">\r\n                  Total Cost ($)\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control mt-0\"\r\n                  name=\"totalFuelCost\"\r\n                  value={fuel.totalFuelCost}\r\n                  onChange={onInputChange}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"text-center pt-5\">\r\n            <button type=\"submit\" className=\"btn btn-primary w-35 py-2 px-5\">\r\n              Save\r\n            </button>\r\n          </div>\r\n        </form>\r\n\r\n        {/* <BottomBar handleSubmit={handleSubmit} handleCancel={handleCancel} p /> */}\r\n        <ErrorModal\r\n          show={modal.showModal}\r\n          error={modal.error}\r\n          handleCloseModal={handleCloseModal}\r\n        />\r\n      </div>\r\n    </UserAuth>\r\n  );\r\n};\r\n\r\nexport default EditFuel;\r\n"]},"metadata":{},"sourceType":"module"}