{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";//import Table from \"../layouts/Table\";\n//import ServiceTypeModal from \"../users/ServiceTypeModal\";\n//import { Modal, Button } from \"react-bootstrap\";\nimport BsTable from\"../layouts/BsTable\";import{textFilter}from\"react-bootstrap-table2-filter\";import UserAuth from\"../auth/UserAuth\";import{Link}from\"react-router-dom\";import{customSort}from\"../utilities/Helpers\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Services=function Services(){/*    const tableTitle = \"Services\";\r\n  const entity = \"services\";\r\n  const addButton = \"Add Service\"; */ /*   const headerItems = [\r\n    \"Service#\",\r\n    \"Vehicle#\",\r\n    \"Registration\",\r\n    \"Service Type\",\r\n    \"Start Date\",\r\n    \"Completion Date\",\r\n    \"Repairer\",\r\n    \"Action\",\r\n  ];\r\n  const columnOrder = [\r\n    \"serviceNum\",\r\n    \"vehicleNum\",\r\n    \"regNum\",\r\n    \"serviceType\",\r\n    \"startDate\",\r\n    \"completionDate\",\r\n    \"repairer\",\r\n  ]; */var columns=[{dataField:\"serviceNum\",text:\"Service#\",sort:true,sortFunc:customSort,formatter:function formatter(cell,row){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Link,{to:\"services/\".concat(row.id),children:row.serviceNum})});}},{dataField:\"regNum\",text:\"Registration\",filter:textFilter()},{dataField:\"serviceType\",text:\"Service Type\"},{dataField:\"startDate\",text:\"Start Date\",sort:true// filter: textFilter(),\n},{dataField:\"completionDate\",text:\"Completion Date\"},{dataField:\"repairer\",text:\"Repairer\"}/*     {\r\n      dataField: \"id\",\r\n      text: \"Actions\",\r\n      formatter: action,\r\n    }, */];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),services=_useState2[0],setServices=_useState2[1];useEffect(function(){loadServices();},[]);var loadServices=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(process.env.REACT_APP_BACKEND_SERVER,\"/services\"),{// headers: { Authorization: `Bearer ${loginState.token}` },\nheaders:{authorization:\"Bearer \".concat(JSON.parse(window.localStorage.getItem(\"auth\")).token)}});case 2:result=_context.sent;// console.log(result);\n//  result.data.map((item) => delete item.id);\nsetServices(result.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function loadServices(){return _ref.apply(this,arguments);};}();//delete service\n/*   const deleteService = async (id) => {\r\n    await axios.delete(`http://localhost:5000/services/${id}`);\r\n    loadServices();\r\n  }; */return/*#__PURE__*/ (/*     <div className=\"container\">\r\n      <Table\r\n        tableTitle={tableTitle}\r\n        entity={entity}\r\n        headerItems={headerItems}\r\n        tableData={services}\r\n        columnOrder={columnOrder}\r\n        deleteRecord={deleteService}\r\n        addButton={addButton}\r\n      /> */ /*       <Modal>\r\n        <Modal.Header></Modal.Header>\r\n        <Modal.Title>Add Service</Modal.Title>\r\n        <Modal.Body>\r\n          <ServiceTypeModal />\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\">Close Button</Button>\r\n        </Modal.Footer>\r\n      </Modal> */ /*     </div> */_jsx(UserAuth,{children:/*#__PURE__*/_jsx(BsTable,{sObject:\"services\",tableTitle:\"Services\",columns:columns,tableData:services,addButton:\"Add Service\"})}));};export default Services;","map":{"version":3,"sources":["C:/Users/akau1902/Web Development/fleet-management-system/client/src/components/list_comps/Services.js"],"names":["React","useState","useEffect","axios","BsTable","textFilter","UserAuth","Link","customSort","Services","columns","dataField","text","sort","sortFunc","formatter","cell","row","id","serviceNum","filter","services","setServices","loadServices","get","process","env","REACT_APP_BACKEND_SERVER","headers","authorization","JSON","parse","window","localStorage","getItem","token","result","data"],"mappings":"kiBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA;AACA;AACA;AACA,MAAOC,CAAAA,OAAP,KAAoB,oBAApB,CACA,OAASC,UAAT,KAA2B,+BAA3B,CACA,MAAOC,CAAAA,QAAP,KAAqB,kBAArB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,UAAT,KAA2B,sBAA3B,C,gGAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrB;AACF;AACA,qCAHuB,CAIrB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAEE,GAAMC,CAAAA,OAAO,CAAG,CACd,CACEC,SAAS,CAAE,YADb,CAEEC,IAAI,CAAE,UAFR,CAGEC,IAAI,CAAE,IAHR,CAIEC,QAAQ,CAAEN,UAJZ,CAKEO,SAAS,CAAE,mBAACC,IAAD,CAAOC,GAAP,CAAe,CACxB,mBACE,sCACE,KAAC,IAAD,EAAM,EAAE,oBAAcA,GAAG,CAACC,EAAlB,CAAR,UAAiCD,GAAG,CAACE,UAArC,EADF,EADF,CAKD,CAXH,CADc,CAcd,CACER,SAAS,CAAE,QADb,CAEEC,IAAI,CAAE,cAFR,CAGEQ,MAAM,CAAEf,UAAU,EAHpB,CAdc,CAmBd,CACEM,SAAS,CAAE,aADb,CAEEC,IAAI,CAAE,cAFR,CAnBc,CAuBd,CACED,SAAS,CAAE,WADb,CAEEC,IAAI,CAAE,YAFR,CAGEC,IAAI,CAAE,IACN;AAJF,CAvBc,CA6Bd,CACEF,SAAS,CAAE,gBADb,CAEEC,IAAI,CAAE,iBAFR,CA7Bc,CAiCd,CACED,SAAS,CAAE,UADb,CAEEC,IAAI,CAAE,UAFR,CAIA;AACJ;AACA;AACA;AACA,SAzCkB,CAAhB,CA4CA,cAAgCX,QAAQ,CAAC,EAAD,CAAxC,wCAAOoB,QAAP,eAAiBC,WAAjB,eAEApB,SAAS,CAAC,UAAM,CACdqB,YAAY,GACb,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMA,CAAAA,YAAY,0FAAG,oKACEpB,CAAAA,KAAK,CAACqB,GAAN,WAChBC,OAAO,CAACC,GAAR,CAAYC,wBADI,cAEnB,CACE;AACAC,OAAO,CAAE,CACPC,aAAa,kBACXC,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAX,EAAgDC,KADrC,CADN,CAFX,CAFmB,CADF,QACbC,MADa,eAYnB;AACA;AACAd,WAAW,CAACc,MAAM,CAACC,IAAR,CAAX,CAdmB,sDAAH,kBAAZd,CAAAA,YAAY,0CAAlB,CAiBA;AACA;AACF;AACA;AACA,OAEE,oBACE;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAVE,CAWE;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBApBE,CAqBE,gBACA,KAAC,QAAD,wBACE,KAAC,OAAD,EACE,OAAO,CAAC,UADV,CAEE,UAAU,CAAC,UAFb,CAGE,OAAO,CAAEb,OAHX,CAIE,SAAS,CAAEW,QAJb,CAKE,SAAS,CAAC,aALZ,EADF,EAtBF,EAgCD,CAjID,CAmIA,cAAeZ,CAAAA,QAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n//import Table from \"../layouts/Table\";\r\n//import ServiceTypeModal from \"../users/ServiceTypeModal\";\r\n//import { Modal, Button } from \"react-bootstrap\";\r\nimport BsTable from \"../layouts/BsTable\";\r\nimport { textFilter } from \"react-bootstrap-table2-filter\";\r\nimport UserAuth from \"../auth/UserAuth\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { customSort } from \"../utilities/Helpers\";\r\n\r\nconst Services = () => {\r\n  /*    const tableTitle = \"Services\";\r\n  const entity = \"services\";\r\n  const addButton = \"Add Service\"; */\r\n  /*   const headerItems = [\r\n    \"Service#\",\r\n    \"Vehicle#\",\r\n    \"Registration\",\r\n    \"Service Type\",\r\n    \"Start Date\",\r\n    \"Completion Date\",\r\n    \"Repairer\",\r\n    \"Action\",\r\n  ];\r\n  const columnOrder = [\r\n    \"serviceNum\",\r\n    \"vehicleNum\",\r\n    \"regNum\",\r\n    \"serviceType\",\r\n    \"startDate\",\r\n    \"completionDate\",\r\n    \"repairer\",\r\n  ]; */\r\n\r\n  const columns = [\r\n    {\r\n      dataField: \"serviceNum\",\r\n      text: \"Service#\",\r\n      sort: true,\r\n      sortFunc: customSort,\r\n      formatter: (cell, row) => {\r\n        return (\r\n          <>\r\n            <Link to={`services/${row.id}`}>{row.serviceNum}</Link>\r\n          </>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      dataField: \"regNum\",\r\n      text: \"Registration\",\r\n      filter: textFilter(),\r\n    },\r\n    {\r\n      dataField: \"serviceType\",\r\n      text: \"Service Type\",\r\n    },\r\n    {\r\n      dataField: \"startDate\",\r\n      text: \"Start Date\",\r\n      sort: true,\r\n      // filter: textFilter(),\r\n    },\r\n    {\r\n      dataField: \"completionDate\",\r\n      text: \"Completion Date\",\r\n    },\r\n    {\r\n      dataField: \"repairer\",\r\n      text: \"Repairer\",\r\n    },\r\n    /*     {\r\n      dataField: \"id\",\r\n      text: \"Actions\",\r\n      formatter: action,\r\n    }, */\r\n  ];\r\n\r\n  const [services, setServices] = useState([]);\r\n\r\n  useEffect(() => {\r\n    loadServices();\r\n  }, []);\r\n\r\n  const loadServices = async () => {\r\n    const result = await axios.get(\r\n      `${process.env.REACT_APP_BACKEND_SERVER}/services`,\r\n      {\r\n        // headers: { Authorization: `Bearer ${loginState.token}` },\r\n        headers: {\r\n          authorization: `Bearer ${\r\n            JSON.parse(window.localStorage.getItem(\"auth\")).token\r\n          }`,\r\n        },\r\n      }\r\n    );\r\n    // console.log(result);\r\n    //  result.data.map((item) => delete item.id);\r\n    setServices(result.data);\r\n  };\r\n\r\n  //delete service\r\n  /*   const deleteService = async (id) => {\r\n    await axios.delete(`http://localhost:5000/services/${id}`);\r\n    loadServices();\r\n  }; */\r\n\r\n  return (\r\n    /*     <div className=\"container\">\r\n      <Table\r\n        tableTitle={tableTitle}\r\n        entity={entity}\r\n        headerItems={headerItems}\r\n        tableData={services}\r\n        columnOrder={columnOrder}\r\n        deleteRecord={deleteService}\r\n        addButton={addButton}\r\n      /> */\r\n    /*       <Modal>\r\n        <Modal.Header></Modal.Header>\r\n        <Modal.Title>Add Service</Modal.Title>\r\n        <Modal.Body>\r\n          <ServiceTypeModal />\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\">Close Button</Button>\r\n        </Modal.Footer>\r\n      </Modal> */\r\n    /*     </div> */\r\n    <UserAuth>\r\n      <BsTable\r\n        sObject=\"services\"\r\n        tableTitle=\"Services\"\r\n        columns={columns}\r\n        tableData={services}\r\n        addButton=\"Add Service\"\r\n      />\r\n    </UserAuth>\r\n  );\r\n};\r\n\r\nexport default Services;\r\n"]},"metadata":{},"sourceType":"module"}