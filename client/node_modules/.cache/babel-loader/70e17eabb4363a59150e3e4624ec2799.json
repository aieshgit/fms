{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import Axios from\"axios\";import{LoginContext}from\"../context/Context.js\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var history=useHistory();var _useContext=useContext(LoginContext),_useContext2=_slicedToArray(_useContext,2),loginState=_useContext2[0],setLoginState=_useContext2[1];var _useState=useState({username:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),loginData=_useState2[0],setLoginData=_useState2[1];var onInputChange=function onInputChange(event){// console.log(event.target.value);\nsetLoginData(_objectSpread(_objectSpread({},loginData),{},_defineProperty({},event.target.name,event.target.value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _yield$Axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return Axios.post(\"/api/login\",loginData);case 4:_yield$Axios$post=_context.sent;data=_yield$Axios$post.data;// can also do below\n//  const result = await Axios.post(\"http://localhost:5000/login\", loginData);\n//  setState({ user: result.data.username, token: result.data.token });\n//set context state variable\nsetLoginState({user:data.username,token:data.token});//save in local storage\nwindow.localStorage.setItem(\"auth\",JSON.stringify(data));// if not using context state below can be used as per pedro's video\n//window.localStorage.setItem(\"auth\", \"Bearer \" + response.data.token);\n// redirect to dashboard/homepage\nhistory.push(\"/dashboard\");_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);console.error(_context.t0.message);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"container login-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 offset-md-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-form bg-light mt-4 p-4\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"row g-3\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Welcome Back\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",className:\"form-control\",placeholder:\"Username\",value:loginData.username,onChange:onInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",className:\"form-control\",placeholder:\"Password\",value:loginData.password,onChange:onInputChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"rememberMe\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"form-check-label\",htmlFor:\"rememberMe\",children:[\" \",\"Remember me\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary px-4 float-end\",children:\"Login\"})})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"mt-4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-center mb-0\",children:[\"Have not account yet? \",/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:\"Signup\"})]})})]})})})});};export default Login;","map":{"version":3,"sources":["C:/Users/akau1902/Web Development/fleet-management-system/client/src/components/list_comps/Login.js"],"names":["React","useState","useContext","Axios","LoginContext","useHistory","Login","history","loginState","setLoginState","username","password","loginData","setLoginData","onInputChange","event","target","name","value","handleSubmit","preventDefault","post","data","user","token","window","localStorage","setItem","JSON","stringify","push","console","error","message"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport Axios from \"axios\";\r\nimport { LoginContext } from \"../context/Context.js\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Login = () => {\r\n  let history = useHistory();\r\n  const [loginState, setLoginState] = useContext(LoginContext);\r\n  const [loginData, setLoginData] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const onInputChange = (event) => {\r\n    // console.log(event.target.value);\r\n    setLoginData({ ...loginData, [event.target.name]: event.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      const { data } = await Axios.post(\"/api/login\", loginData);\r\n      // can also do below\r\n      //  const result = await Axios.post(\"http://localhost:5000/login\", loginData);\r\n      //  setState({ user: result.data.username, token: result.data.token });\r\n\r\n      //set context state variable\r\n      setLoginState({ user: data.username, token: data.token });\r\n\r\n      //save in local storage\r\n      window.localStorage.setItem(\"auth\", JSON.stringify(data));\r\n      // if not using context state below can be used as per pedro's video\r\n      //window.localStorage.setItem(\"auth\", \"Bearer \" + response.data.token);\r\n\r\n      // redirect to dashboard/homepage\r\n      history.push(\"/dashboard\");\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container login-container\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-4 offset-md-4\">\r\n          <div className=\"login-form bg-light mt-4 p-4\">\r\n            <form className=\"row g-3\" onSubmit={handleSubmit}>\r\n              <h4>Welcome Back</h4>\r\n              <div className=\"col-12\">\r\n                <label>Username</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"username\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Username\"\r\n                  value={loginData.username}\r\n                  onChange={onInputChange}\r\n                />\r\n              </div>\r\n              <div className=\"col-12\">\r\n                <label>Password</label>\r\n                <input\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Password\"\r\n                  value={loginData.password}\r\n                  onChange={onInputChange}\r\n                />\r\n              </div>\r\n              <div className=\"col-12\">\r\n                <div className=\"form-check\">\r\n                  <input\r\n                    className=\"form-check-input\"\r\n                    type=\"checkbox\"\r\n                    id=\"rememberMe\"\r\n                  />\r\n                  <label className=\"form-check-label\" htmlFor=\"rememberMe\">\r\n                    {\" \"}\r\n                    Remember me\r\n                  </label>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-12\">\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"btn btn-primary px-4 float-end\"\r\n                >\r\n                  Login\r\n                </button>\r\n              </div>\r\n            </form>\r\n            <hr className=\"mt-4\" />\r\n            <div className=\"col-12\">\r\n              <p className=\"text-center mb-0\">\r\n                Have not account yet? <a href=\"#\">Signup</a>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}