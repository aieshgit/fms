{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Axios from\"axios\";//import { toast } from \"react-toastify\";\n//import { useHistory } from \"react-router-dom\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FileUpload=function FileUpload(props){// let history = useHistory();\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),files=_useState2[0],setFiles=_useState2[1];var onInputChange=function onInputChange(e){setFiles(e.target.files);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var data,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();data=new FormData();for(i=0;i<files.length;i++){// console.log(files);\ndata.append(\"file\",files[i]);}data.append(\"parentDbId\",props.parentDbId);data.append(\"parentObject\",props.parentObject);//console.log(data);\n_context.prev=5;_context.next=8;return Axios.post(\"\".concat(process.env.REACT_APP_BACKEND_SERVER,\"/upload\"),data);case 8:_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](5);console.error(_context.t0.message);/*       toast.error(\"Upload Error\", {\r\n        position: toast.POSITION.TOP_CENTER,\r\n      }); */case 13:case\"end\":return _context.stop();}}},_callee,null,[[5,10]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"form\",{//  action=\"http://localhost:5000/upload\"\n//  method=\"POST\"\n//encType=\"multipart/form-data\"\nonSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"formFileMultiple\",className:\"form-label mb-0\",children:\"Add files\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"file\",id:\"formFileMultiple\",name:\"file\",multiple:true,onChange:onInputChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-4 mt-0 gx-0\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary mt-4\",children:\"Upload\"})})]})});};export default FileUpload;","map":{"version":3,"sources":["C:/Users/akau1902/Web Development/fleet-management-system/client/src/components/layouts/FileUpload.js"],"names":["React","useState","Axios","FileUpload","props","files","setFiles","onInputChange","e","target","handleSubmit","preventDefault","data","FormData","i","length","append","parentDbId","parentObject","post","process","env","REACT_APP_BACKEND_SERVER","console","error","message"],"mappings":"kiBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA;AACA;wFAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,KAAD,CAAW,CAC5B;AACA,cAA0BH,QAAQ,CAAC,EAAD,CAAlC,wCAAOI,KAAP,eAAcC,QAAd,eACA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,CAAD,CAAO,CAC3BF,QAAQ,CAACE,CAAC,CAACC,MAAF,CAASJ,KAAV,CAAR,CACD,CAFD,CAIA,GAAMK,CAAAA,YAAY,0FAAG,iBAAOF,CAAP,6HACnBA,CAAC,CAACG,cAAF,GAEMC,IAHa,CAGN,GAAIC,CAAAA,QAAJ,EAHM,CAKnB,IAASC,CAAT,CAAa,CAAb,CAAgBA,CAAC,CAAGT,KAAK,CAACU,MAA1B,CAAkCD,CAAC,EAAnC,CAAuC,CACrC;AACAF,IAAI,CAACI,MAAL,CAAY,MAAZ,CAAoBX,KAAK,CAACS,CAAD,CAAzB,EACD,CAEDF,IAAI,CAACI,MAAL,CAAY,YAAZ,CAA0BZ,KAAK,CAACa,UAAhC,EACAL,IAAI,CAACI,MAAL,CAAY,cAAZ,CAA4BZ,KAAK,CAACc,YAAlC,EACA;AAZmB,sCAeXhB,CAAAA,KAAK,CAACiB,IAAN,WAAcC,OAAO,CAACC,GAAR,CAAYC,wBAA1B,YAA6DV,IAA7D,CAfW,yFAuBjBW,OAAO,CAACC,KAAR,CAAc,YAAIC,OAAlB,EACA;AACN;AACA,YA1BuB,qEAAH,kBAAZf,CAAAA,YAAY,4CAAlB,CA8BA,mBACE,aACE;AACA;AACA;AACA,QAAQ,CAAEA,YAJZ,uBAME,aAAK,SAAS,CAAC,UAAf,wBACE,aAAK,SAAS,CAAC,UAAf,wBACE,cAAO,OAAO,CAAC,kBAAf,CAAkC,SAAS,CAAC,iBAA5C,uBADF,cAIE,cACE,SAAS,CAAC,cADZ,CAEE,IAAI,CAAC,MAFP,CAGE,EAAE,CAAC,kBAHL,CAIE,IAAI,CAAC,MAJP,CAKE,QAAQ,KALV,CAME,QAAQ,CAAEH,aANZ,EAJF,GADF,cAcE,YAAK,SAAS,CAAC,oBAAf,uBACE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,sBAAhC,oBADF,EAdF,GANF,EADF,CA6BD,CAlED,CAoEA,cAAeJ,CAAAA,UAAf","sourcesContent":["import React, { useState } from \"react\";\r\nimport Axios from \"axios\";\r\n//import { toast } from \"react-toastify\";\r\n//import { useHistory } from \"react-router-dom\";\r\n\r\nconst FileUpload = (props) => {\r\n  // let history = useHistory();\r\n  const [files, setFiles] = useState([]);\r\n  const onInputChange = (e) => {\r\n    setFiles(e.target.files);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const data = new FormData();\r\n\r\n    for (let i = 0; i < files.length; i++) {\r\n      // console.log(files);\r\n      data.append(\"file\", files[i]);\r\n    }\r\n\r\n    data.append(\"parentDbId\", props.parentDbId);\r\n    data.append(\"parentObject\", props.parentObject);\r\n    //console.log(data);\r\n\r\n    try {\r\n      await Axios.post(`${process.env.REACT_APP_BACKEND_SERVER}/upload`, data);\r\n\r\n      //history.push(`/services/edit/${props.parentUuid}`);\r\n      // window.location.reload(true);\r\n      /*       toast.success(\"Upload Successful\", {\r\n        position: toast.POSITION.TOP_CENTER,\r\n      }); */\r\n    } catch (err) {\r\n      console.error(err.message);\r\n      /*       toast.error(\"Upload Error\", {\r\n        position: toast.POSITION.TOP_CENTER,\r\n      }); */\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form\r\n      //  action=\"http://localhost:5000/upload\"\r\n      //  method=\"POST\"\r\n      //encType=\"multipart/form-data\"\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <div className=\"row mb-5\">\r\n        <div className=\"col-lg-4\">\r\n          <label htmlFor=\"formFileMultiple\" className=\"form-label mb-0\">\r\n            Add files\r\n          </label>\r\n          <input\r\n            className=\"form-control\"\r\n            type=\"file\"\r\n            id=\"formFileMultiple\"\r\n            name=\"file\"\r\n            multiple\r\n            onChange={onInputChange}\r\n          />\r\n        </div>\r\n        <div className=\"col-lg-4 mt-0 gx-0\">\r\n          <button type=\"submit\" className=\"btn btn-primary mt-4\">\r\n            Upload\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default FileUpload;\r\n"]},"metadata":{},"sourceType":"module"}