{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Axios from\"axios\";import{useHistory}from\"react-router-dom\";import BottomBar from\"../layouts/BottomBar\";import Dropdown from\"../layouts/Dropdown\";import UserAuth from\"../auth/UserAuth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddOdoReading=function AddOdoReading(){var history=useHistory();var _useState=useState({vehicleNum:\"\",readingDate:\"\",initialReading:\"\",finalReading:\"\",mileage:\"\"}),_useState2=_slicedToArray(_useState,2),odoReading=_useState2[0],setOdoReading=_useState2[1];var onInputChange=function onInputChange(event){// console.log(event.target.value)\nif(event.target.name===\"vehicleNum\"){var _objectSpread2;setOdoReading(_objectSpread(_objectSpread({},odoReading),{},(_objectSpread2={},_defineProperty(_objectSpread2,event.target.name,event.target.value),_defineProperty(_objectSpread2,\"vehicleDbId\",event.target.selectedOptions[0].getAttribute(\"dbid\")),_objectSpread2)));}else if(event.target.name===\"initialReading\"){var _objectSpread3;setOdoReading(_objectSpread(_objectSpread({},odoReading),{},(_objectSpread3={},_defineProperty(_objectSpread3,event.target.name,event.target.value),_defineProperty(_objectSpread3,\"mileage\",odoReading.finalReading-event.target.value),_objectSpread3)));}else if(event.target.name===\"finalReading\"){var _objectSpread4;setOdoReading(_objectSpread(_objectSpread({},odoReading),{},(_objectSpread4={},_defineProperty(_objectSpread4,event.target.name,event.target.value),_defineProperty(_objectSpread4,\"mileage\",event.target.value-odoReading.initialReading),_objectSpread4)));}else{setOdoReading(_objectSpread(_objectSpread({},odoReading),{},_defineProperty({},event.target.name,event.target.value)));}};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return Axios.post(\"\".concat(process.env.REACT_APP_BACKEND_SERVER,\"/odoReadings\"),odoReading,{// headers: { Authorization: `Bearer ${loginState.token}` },\nheaders:{authorization:\"Bearer \".concat(JSON.parse(window.localStorage.getItem(\"auth\")).token)}});case 4:history.push(\"/odoReadings\");_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);console.error(_context.t0.message);case 10:case\"end\":return _context.stop();}}},_callee,null,[[1,7]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var handleCancel=function handleCancel(){setOdoReading(\"\");history.push(\"/odoReadings\");};return/*#__PURE__*/_jsx(UserAuth,{children:/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container p-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center m-4\",children:\"Add Odometer Reading\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"row my-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-3 p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"vehicleNum\",className:\"form-label mb-0\",children:\"Vehicle#\"}),/*#__PURE__*/_jsx(\"select\",{type:\"text\",className:\"form-select mt-0\",name:\"vehicleNum\",value:odoReading.vehicleNum,onChange:onInputChange,children:/*#__PURE__*/_jsx(Dropdown,{dropDownObject:\"vehicles\",dropDownKey1:\"vehicleNum\",dropDownKey2:\"regNum\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"readingDate\",className:\"form-label mb-0\",children:\"Reading Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control mt-0\",name:\"readingDate\",value:odoReading.readingDate,onChange:onInputChange})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-3 p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"initialReading\",className:\"form-label mb-0\",children:\"Initial Reading\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control mt-0\",name:\"initialReading\",value:odoReading.initialReading,onChange:onInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"finalReading\",className:\"form-label mb-0\",children:\"Final Reading\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control mt-0\",name:\"finalReading\",value:odoReading.finalReading,onChange:onInputChange})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3 p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"mileage\",className:\"form-label mb-0\",children:\"Mileage\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control mt-0\",name:\"mileage\"//  value={odoReading.mileage}\n,value:odoReading.mileage// onChange={onInputChange}\n,disabled:true,readOnly:true})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3 p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"SpareField\",className:\"form-label mb-0\",children:\"Spare Field\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control mt-0\",name:\"SpareField\"//  value={odoReading.mileage}\n,onChange:onInputChange})]})})]})}),/*#__PURE__*/_jsx(BottomBar,{handleSubmit:handleSubmit,handleCancel:handleCancel,p:true})]})})});};export default AddOdoReading;","map":{"version":3,"sources":["C:/Users/akau1902/Web Development/fleet-management-system/client/src/components/detail_comps/AddOdoReading.js"],"names":["React","useState","Axios","useHistory","BottomBar","Dropdown","UserAuth","AddOdoReading","history","vehicleNum","readingDate","initialReading","finalReading","mileage","odoReading","setOdoReading","onInputChange","event","target","name","value","selectedOptions","getAttribute","handleSubmit","preventDefault","post","process","env","REACT_APP_BACKEND_SERVER","headers","authorization","JSON","parse","window","localStorage","getItem","token","push","console","error","message","handleCancel"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport Axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport BottomBar from \"../layouts/BottomBar\";\r\nimport Dropdown from \"../layouts/Dropdown\";\r\nimport UserAuth from \"../auth/UserAuth\";\r\n\r\nconst AddOdoReading = () => {\r\n  let history = useHistory();\r\n  const [odoReading, setOdoReading] = useState({\r\n    vehicleNum: \"\",\r\n    readingDate: \"\",\r\n    initialReading: \"\",\r\n    finalReading: \"\",\r\n    mileage: \"\",\r\n  });\r\n\r\n  const onInputChange = (event) => {\r\n    // console.log(event.target.value)\r\n\r\n    if (event.target.name === \"vehicleNum\") {\r\n      setOdoReading({\r\n        ...odoReading,\r\n        [event.target.name]: event.target.value,\r\n        vehicleDbId: event.target.selectedOptions[0].getAttribute(\"dbid\"),\r\n      });\r\n    } else if (event.target.name === \"initialReading\") {\r\n      setOdoReading({\r\n        ...odoReading,\r\n        [event.target.name]: event.target.value,\r\n        mileage: odoReading.finalReading - event.target.value,\r\n      });\r\n    } else if (event.target.name === \"finalReading\") {\r\n      setOdoReading({\r\n        ...odoReading,\r\n        [event.target.name]: event.target.value,\r\n        mileage: event.target.value - odoReading.initialReading,\r\n      });\r\n    } else {\r\n      setOdoReading({ ...odoReading, [event.target.name]: event.target.value });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      //console.log(odoReading);\r\n      await Axios.post(\r\n        `${process.env.REACT_APP_BACKEND_SERVER}/odoReadings`,\r\n        odoReading,\r\n        {\r\n          // headers: { Authorization: `Bearer ${loginState.token}` },\r\n          headers: {\r\n            authorization: `Bearer ${\r\n              JSON.parse(window.localStorage.getItem(\"auth\")).token\r\n            }`,\r\n          },\r\n        }\r\n      );\r\n      history.push(\"/odoReadings\");\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setOdoReading(\"\");\r\n    history.push(\"/odoReadings\");\r\n  };\r\n\r\n  return (\r\n    <UserAuth>\r\n      <div className=\"table-container\">\r\n        <div className=\"container p-5\">\r\n          <h2 className=\"text-center m-4\">Add Odometer Reading</h2>\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"row my-5\">\r\n              <div className=\"col-lg-3 p-3\">\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"vehicleNum\" className=\"form-label mb-0\">\r\n                    Vehicle#\r\n                  </label>\r\n                  <select\r\n                    type=\"text\"\r\n                    className=\"form-select mt-0\"\r\n                    name=\"vehicleNum\"\r\n                    value={odoReading.vehicleNum}\r\n                    onChange={onInputChange}\r\n                  >\r\n                    <Dropdown\r\n                      dropDownObject=\"vehicles\"\r\n                      dropDownKey1=\"vehicleNum\"\r\n                      dropDownKey2=\"regNum\"\r\n                    />\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"readingDate\" className=\"form-label mb-0\">\r\n                    Reading Date\r\n                  </label>\r\n                  <input\r\n                    type=\"date\"\r\n                    className=\"form-control mt-0\"\r\n                    name=\"readingDate\"\r\n                    value={odoReading.readingDate}\r\n                    onChange={onInputChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-lg-3 p-3\">\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"initialReading\" className=\"form-label mb-0\">\r\n                    Initial Reading\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control mt-0\"\r\n                    name=\"initialReading\"\r\n                    value={odoReading.initialReading}\r\n                    onChange={onInputChange}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"finalReading\" className=\"form-label mb-0\">\r\n                    Final Reading\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control mt-0\"\r\n                    name=\"finalReading\"\r\n                    value={odoReading.finalReading}\r\n                    onChange={onInputChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-lg-3 p-3\">\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"mileage\" className=\"form-label mb-0\">\r\n                    Mileage\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control mt-0\"\r\n                    name=\"mileage\"\r\n                    //  value={odoReading.mileage}\r\n                    value={odoReading.mileage}\r\n                    // onChange={onInputChange}\r\n                    disabled\r\n                    readOnly\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-lg-3 p-3\">\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"SpareField\" className=\"form-label mb-0\">\r\n                    Spare Field\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control mt-0\"\r\n                    name=\"SpareField\"\r\n                    //  value={odoReading.mileage}\r\n                    onChange={onInputChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n\r\n          <BottomBar\r\n            handleSubmit={handleSubmit}\r\n            handleCancel={handleCancel}\r\n            p\r\n          />\r\n        </div>\r\n      </div>\r\n    </UserAuth>\r\n  );\r\n};\r\n\r\nexport default AddOdoReading;\r\n"]},"metadata":{},"sourceType":"module"}