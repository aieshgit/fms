{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/akau1902/Web Development/fleet-management-system/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Axios from\"axios\";import{useHistory}from\"react-router-dom\";import BottomBar from\"../layouts/BottomBar\";import Dropdown from\"../layouts/Dropdown\";import FileUpload from\"../layouts/FileUpload\";import Documents from\"../list_comps/Documents\";import{ToastContainer}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import UserAuth from\"../auth/UserAuth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddService=function AddService(){var history=useHistory();var _useState=useState({vehicleNum:\"\",serviceType:\"\",startDate:\"\",completionDate:\"\",repairer:\"\",vehicleDbId:\"\"}),_useState2=_slicedToArray(_useState,2),service=_useState2[0],setService=_useState2[1];var onInputChange=function onInputChange(event){// console.log(event.target.value)\nif(event.target.name===\"vehicleNum\"){var _objectSpread2;setService(_objectSpread(_objectSpread({},service),{},(_objectSpread2={},_defineProperty(_objectSpread2,event.target.name,event.target.value),_defineProperty(_objectSpread2,\"vehicleDbId\",event.target.selectedOptions[0].getAttribute(\"dbid\")),_objectSpread2)));}else{setService(_objectSpread(_objectSpread({},service),{},_defineProperty({},event.target.name,event.target.value)));}};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return Axios.post(\"\".concat(process.env.REACT_APP_BACKEND_SERVER,\"/services\"),service,{// headers: { Authorization: `Bearer ${loginState.token}` },\nheaders:{authorization:\"Bearer \".concat(JSON.parse(window.localStorage.getItem(\"auth\")).token)}});case 4://  console.log(vehicle);\nhistory.push(\"/services\");_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);console.error(_context.t0.message);case 10:case\"end\":return _context.stop();}}},_callee,null,[[1,7]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var handleCancel=function handleCancel(){setService(\"\");history.push(\"/services\");};return/*#__PURE__*/_jsx(UserAuth,{children:/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container p-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center m-4\",children:\"Add Service\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"row my-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-3 p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"vehicleNum\",className:\"form-label mb-0\",children:\"Vehicle#\"}),/*#__PURE__*/_jsx(\"select\",{type:\"text\",className:\"form-select mt-0\",name:\"vehicleNum\",value:service.vehicleNum,onChange:onInputChange,children:/*#__PURE__*/_jsx(Dropdown,{dropDownObject:\"vehicles\",dropDownKey1:\"vehicleNum\",dropDownKey2:\"regNum\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"serviceType\",className:\"form-label mb-0\",children:\"Service Type\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select mt-0\",name:\"serviceType\",value:service.serviceType,onChange:onInputChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"DEFAULT\",children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{value:\"A\",children:\"A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B\",children:\"B\"}),/*#__PURE__*/_jsx(\"option\",{value:\"C\",children:\"C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"D\",children:\"D\"}),/*#__PURE__*/_jsx(\"option\",{value:\"E\",children:\"E\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-3 p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"startDate\",className:\"form-label mb-0\",children:\"Start Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control mt-0\",name:\"startDate\",value:service.startDate,onChange:onInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"completionDate\",className:\"form-label mb-0\",children:\"Completion Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control mt-0\",name:\"completionDate\",value:service.completionDate,onChange:onInputChange})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3 p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"repairer\",className:\"form-label mb-0\",children:\"Repairer\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control mt-0\",name:\"repairer\",value:service.repairer,onChange:onInputChange})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3 p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"SpareField\",className:\"form-label mb-0\",children:\"Spare Field\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control mt-0\",name:\"SpareField\",value:service.completionDate,onChange:onInputChange})]})})]})}),/*#__PURE__*/_jsx(BottomBar,{handleSubmit:handleSubmit,handleCancel:handleCancel,p:true})]})})});};export default AddService;","map":{"version":3,"sources":["C:/Users/akau1902/Web Development/fleet-management-system/client/src/components/detail_comps/AddService.js"],"names":["React","useState","Axios","useHistory","BottomBar","Dropdown","FileUpload","Documents","ToastContainer","UserAuth","AddService","history","vehicleNum","serviceType","startDate","completionDate","repairer","vehicleDbId","service","setService","onInputChange","event","target","name","value","selectedOptions","getAttribute","handleSubmit","preventDefault","post","process","env","REACT_APP_BACKEND_SERVER","headers","authorization","JSON","parse","window","localStorage","getItem","token","push","console","error","message","handleCancel"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport Axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport BottomBar from \"../layouts/BottomBar\";\r\nimport Dropdown from \"../layouts/Dropdown\";\r\nimport FileUpload from \"../layouts/FileUpload\";\r\nimport Documents from \"../list_comps/Documents\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport UserAuth from \"../auth/UserAuth\";\r\n\r\nconst AddService = () => {\r\n  let history = useHistory();\r\n  const [service, setService] = useState({\r\n    vehicleNum: \"\",\r\n    serviceType: \"\",\r\n    startDate: \"\",\r\n    completionDate: \"\",\r\n    repairer: \"\",\r\n    vehicleDbId: \"\",\r\n  });\r\n\r\n  const onInputChange = (event) => {\r\n    // console.log(event.target.value)\r\n\r\n    if (event.target.name === \"vehicleNum\") {\r\n      setService({\r\n        ...service,\r\n        [event.target.name]: event.target.value,\r\n        vehicleDbId: event.target.selectedOptions[0].getAttribute(\"dbid\"),\r\n      });\r\n    } else {\r\n      setService({ ...service, [event.target.name]: event.target.value });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      //  console.log(service);\r\n      await Axios.post(\r\n        `${process.env.REACT_APP_BACKEND_SERVER}/services`,\r\n        service,\r\n        {\r\n          // headers: { Authorization: `Bearer ${loginState.token}` },\r\n          headers: {\r\n            authorization: `Bearer ${\r\n              JSON.parse(window.localStorage.getItem(\"auth\")).token\r\n            }`,\r\n          },\r\n        }\r\n      );\r\n      //  console.log(vehicle);\r\n      history.push(\"/services\");\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setService(\"\");\r\n    history.push(\"/services\");\r\n  };\r\n\r\n  return (\r\n    <UserAuth>\r\n      <div className=\"table-container\">\r\n        <div className=\"container p-5\">\r\n          <h2 className=\"text-center m-4\">Add Service</h2>\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"row my-5\">\r\n              <div className=\"col-lg-3 p-3\">\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"vehicleNum\" className=\"form-label mb-0\">\r\n                    Vehicle#\r\n                  </label>\r\n                  <select\r\n                    type=\"text\"\r\n                    className=\"form-select mt-0\"\r\n                    name=\"vehicleNum\"\r\n                    value={service.vehicleNum}\r\n                    onChange={onInputChange}\r\n                  >\r\n                    <Dropdown\r\n                      dropDownObject=\"vehicles\"\r\n                      dropDownKey1=\"vehicleNum\"\r\n                      dropDownKey2=\"regNum\"\r\n                    />\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"serviceType\" className=\"form-label mb-0\">\r\n                    Service Type\r\n                  </label>\r\n                  <select\r\n                    className=\"form-select mt-0\"\r\n                    name=\"serviceType\"\r\n                    value={service.serviceType}\r\n                    onChange={onInputChange}\r\n                  >\r\n                    <option value=\"DEFAULT\">Select</option>\r\n                    <option value=\"A\">A</option>\r\n                    <option value=\"B\">B</option>\r\n                    <option value=\"C\">C</option>\r\n                    <option value=\"D\">D</option>\r\n                    <option value=\"E\">E</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-lg-3 p-3\">\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"startDate\" className=\"form-label mb-0\">\r\n                    Start Date\r\n                  </label>\r\n                  <input\r\n                    type=\"date\"\r\n                    className=\"form-control mt-0\"\r\n                    name=\"startDate\"\r\n                    value={service.startDate}\r\n                    onChange={onInputChange}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"completionDate\" className=\"form-label mb-0\">\r\n                    Completion Date\r\n                  </label>\r\n                  <input\r\n                    type=\"date\"\r\n                    className=\"form-control mt-0\"\r\n                    name=\"completionDate\"\r\n                    value={service.completionDate}\r\n                    onChange={onInputChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-lg-3 p-3\">\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"repairer\" className=\"form-label mb-0\">\r\n                    Repairer\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control mt-0\"\r\n                    name=\"repairer\"\r\n                    value={service.repairer}\r\n                    onChange={onInputChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-lg-3 p-3\">\r\n                <div className=\"mb-3\">\r\n                  <label htmlFor=\"SpareField\" className=\"form-label mb-0\">\r\n                    Spare Field\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control mt-0\"\r\n                    name=\"SpareField\"\r\n                    value={service.completionDate}\r\n                    onChange={onInputChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n          {/*           <FileUpload\r\n            parentObject={\"service\"}\r\n            parentDbId={service.serviceDbId}\r\n            parentUuid={id}\r\n          />\r\n          <ToastContainer />\r\n\r\n          {service.serviceDbId && (\r\n            <Documents parentDbId={service.serviceDbId} />\r\n          )} */}\r\n\r\n          <BottomBar\r\n            handleSubmit={handleSubmit}\r\n            handleCancel={handleCancel}\r\n            p\r\n          />\r\n        </div>\r\n      </div>\r\n    </UserAuth>\r\n  );\r\n};\r\n\r\nexport default AddService;\r\n"]},"metadata":{},"sourceType":"module"}